{% extends 'base.html.twig' %}

{% block title %}Chris B Dev - Modifier un projet{% endblock %}

{% block body %}

    {% if is_granted('ROLE_ADMIN') %}
        <section class="has-text-centered hero is-bold is-fullheight is-primary" style="justify-content: center;align-items: center;position: relative;padding: 2rem">

            <h1 class="title has-text-black-bis has-text-weight-bold" style="text-transform: uppercase">
                Modifier le projet :
            </h1>
            <h2 class="subtitle has-text-black-bis is-family-primary is-4">" {{ projet.title }} "</h2>


            <div class="box column is-two-fifths is-full-touch has-background-black-bis" style="align-self: center">

                <div class="column half-touch has-text-centered is-flex" style="justify-content: space-between">

                    <span class="icon is-medium">
                        <a class="button is-small is-green-custom" type="submit" href="{{ path('home') }}#projets" title="Revenir à l'accueil">
                            <span style="text-decoration: none" class="fas fa-lg fa-arrow-left has-text-dark"></span>
                        </a>
                    </span>

                    <span class="icon is-medium">
                        <a style="text-decoration: none" href="{{ path('del_projet', {'id': projet.id}) }}" class="fas fa-2x fa-times-circle has-text-danger" title="supprimer le projet"></a>
                    </span>
                </div>

                {{ form_start(projet_form) }}

                <div class="field">
                    <label class="label has-text-light">Titre</label>
                    <div class="control">
                        {{ form_widget(projet_form.title, {'attr' : {'class' : 'input', 'placeholder' : 'ex : chris B developper', 'alt' : 'Titre' }
                        }) }}
                    </div>
                </div>

                <div class="field">
                    <label class="label">Année de réalisation</label>
                    <div class="control">
                        {{ form_widget(projet_form.dateReal, {'attr' : {
                            'class' : 'input',
                            'placeholder' : 'ex : 2015',
                            'alt' : 'Date de réalisation'
                        }
                        }) }}
                    </div>
                </div>

                <div class="field">
                    <label class="label">Type de développement</label>
                    <div class="control select" style="width: 100%">
                        {{ form_widget(projet_form.typedev, {placeholder: 'Selectionner ...', 'attr' : {
                            'class' : 'select input',
                            'alt' : 'Type de développement'
                        }
                        }) }}
                    </div>
                </div>

                <div class="field">
                    <label class="label has-text-light">Texte</label>
                    <div class="control">
                        {{ form_widget(projet_form.text, {'attr' : {
                            'class' : 'textarea',
                            'placeholder' : 'Entre le text de la projet',
                            'pattern' : '[0-9]{10}',
                            'alt' : 'Text de la projet',
                            'style' :  'resize:none'} }) }}
                    </div>
                </div>

                <div class="field">
                    <label class="label">Lien url du projet</label>
                    <div class="control">
                        {{ form_widget(projet_form.link, {'attr' : {
                            'class' : 'input',
                            'placeholder' : 'ex : https://chrisbdev.com',
                            'alt' : 'url du projet'
                        }
                        }) }}
                    </div>
                </div>


                <label class="label">Liste des attributs</label>
                <div class="field is-grouped is-grouped-multiline">

                    {% for attribut in attribut %}

                        <div class="control">
                            <div class="tags has-addons">
                                {% if attribut in projet.attributs %}
                                    <a class="tag is-warning" href="{{ path('del_attribut_to_projet', {'id': projet.id, 'idattribut': attribut.id}) }}" title="retirer l'attribut du projet">
                                        {{ attribut.title }}
                                    </a>
                                {% else %}
                                    <a class="tag is-light" href="{{ path('add_attribut_to_projet', {'id': projet.id, 'idattribut': attribut.id }) }}" title="ajouter l'attribut au projet">
                                        {{ attribut.title }}
                                    </a>
                                {% endif %}
                                <a class="tag fas fa-2x fa-edit has-text-warning" href="{{ path('edit_attribut', {'id': attribut.id}) }}" title="modifier l'attribut"></a>
                                <a class="tag is-delete" href="{{ path('del_attribut', {'id': attribut.id}) }}" title="supprimer l'attribut"></a>
                            </div>
                        </div>

                    {% endfor %}
                    <a class="tag icon" href="{{ path('add_attribut') }}" style="text-decoration: none" title="Ajouter un attribut">
                        <i  class="fas fa-lg fa-plus-circle has-text-black-bis" ></i>
                    </a>
                </div>


                <label class="label">Liste des technologies</label>
                <div class="field is-grouped is-grouped-multiline">

                {% for techno in techno %}

                    <div class="control">
                        <div class="tags has-addons">
                    {% if techno in projet.techno %}
                            <a class="tag is-warning" href="{{ path('del_techno_to_projet', {'id': projet.id, 'idtechno': techno.id}) }}" title="retirer le technologie du projet">
                                #{{ techno.name }}
                            </a>
                    {% else %}
                        <a class="tag is-light" href="{{ path('add_techno_to_projet', {'id': projet.id, 'idtechno': techno.id}) }}" title="ajouter le technologie au projet">
                            #{{ techno.name }}
                        </a>
                    {% endif %}
                            <a class="tag fas fa-2x fa-edit has-text-warning" href="{{ path('edit_techno', {'id': techno.id}) }}" title="modifier la technologie"></a>
                            <a class="tag is-delete" href="{{ path('del_techno', {'id': techno.id}) }}" title="supprimer la technologie"></a>
                        </div>
                    </div>

                {% endfor %}
                    <a class="tag icon" href="{{ path('add_techno') }}" style="text-decoration: none" title="Ajouter une technologie">
                        <i  class="fas fa-lg fa-plus-circle has-text-black-bis" ></i>
                    </a>
                </div>




                <div class="field">
                    <label class="label has-text-light">Image d'illustration</label>

                    {% if projet.imgProjetName %}
                        <figure class="figure" style="position: relative;margin-bottom: .75rem">
                            <a href="{{ path('del_img_projet', {'id': projet.id}) }}" class="delete is-large" style="position: absolute;top: .3rem;right: .3rem;"></a>
                            <img class="img-thumb-projet" src="{{ vich_uploader_asset(projet, 'img') | imagine_filter('thumb') }}" alt="{{ projet.imgProjetName }}">
                        </figure>
                        {% endif %}

                    <div class="control">
                        <div class="file has-name is-fullwidth">
                            <label class="file-label">
                                {{ form_widget(projet_form.img, {'attr' : {
                                    'class' : 'file-input',
                                    'alt' : 'Uploader une image'} }) }}
                                <span class="file-cta">
                                    <span class="file-icon">
                                        <i class="fas fa-upload"></i>
                                    </span>
                                    <span class="file-label">
                                        Choose a file…
                                    </span>
                                </span>
                                <span class="file-name has-background-grey-lighter">
                                    {% if projet.imgProjetName %}
                                        {{ projet.imgProjetName }}
                                    {% else %}
                                        Aucune image uploadé
                                    {% endif %}
                                </span>
                            </label>
                        </div>
                    </div>

                </div>

                <div class="field is-grouped is-flex" title="Submit" style="justify-content: center">
                    <div class="control">
                        <button class="button is-green-custom" type="submit">Valider les modifications</button>
                    </div>
                </div>

                {{ form_end(projet_form) }}

            </div>



        </section>
    {% endif %}

{% endblock %}