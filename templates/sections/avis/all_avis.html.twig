{% extends 'base.html.twig' %}

{% block title %}chrisBdev | Avis clients{% endblock %}

{#{% block meta_description %}N'hésitez pas à laisser votre avi concernant chrisBdev !{% endblock %}#}

{% block body %}

    <section  style="background: center / cover no-repeat fixed url('{{ asset('build/images/feedback-green.1f88d357.jpg') }}');position: relative;">
        <div class="section-bg-layer"></div>
        <div class="hero-body">
            <div class="container">
                <h2 class="subtitle is-1 has-text-light has-text-weight-bold has-text-centered-touch is-flex-desktop subtitle-right" style="align-items: baseline">
                <span class="icon has-text-light is-hidden-touch" style="margin: 0 1.75rem">
                    <i class="fas fa-arrow-alt-circle-right"></i>
                </span>
                    Avis clients
                </h2>

                <div class="is-flex is-justify-content-center has-text-centered">

                    <div class="column is-two-thirds-desktop">
                        {% if avis is empty %}
                            <article class="message is-small">
                                <div class="message-header is-green-custom">
                                    <p>Soutennez chrisBdev</p>
                                    <span class="icon is-small">
                                <i class="fas fa-lg fa-info-circle"></i>
                            </span>
                                </div>
                                <div class="message-body has-text-left">
                                    Soyez le premier à noter chrisBdev !
                                </div>
                                <div class="column">
                                    <a href="{{ path('avis_add') }}" class="button is-green-custom has-text-weight-bold">
                                        Noter chrisBdev
                                    </a>
                                </div>
                            </article>
                        {% else %}

                            {% if is_granted("ROLE_ADMIN") %}
                                <div class="tags has-addons is-centered" style="margin: 0">

                                    <span class="icon tag is-primary has-text-light">
                                        <i class="far fa-lg fa-calendar-alt"></i>
                                    </span>

                                    <span class="tag is-primary has-text-light has-text-weight-bold" style="flex: 1;">Nombre total d'avis</span>

                                    <span class="tag" style="flex: 1;">{{ avis|length }}</span>

                                </div>
                                dont {{ avisValidated|length }} visibles

                            {% else %}
                                <div class="tags has-addons is-centered">

                                    <span class="icon tag is-primary has-text-light">
                                        <i class="far fa-lg fa-calendar-alt"></i>
                                    </span>

                                    <span class="tag is-primary has-text-light has-text-weight-bold">Nombre total d'avis</span>

                                    <span class="tag">{{ avis|length }}</span>

                                </div>
                            {% endif %}

                            {% for avis in avis %}

                                {% if avis.validated == true %}

                                    {{ include('sections/avis/avis_box.html.twig') }}

                                {% elseif is_granted("ROLE_ADMIN") %}

                                    {{ include('sections/avis/avis_box.html.twig') }}

                                {% endif %}

                            {% endfor %}
                            
                        {% endif %}
                    </div>




                </div>

            </div>
        </div>

        <div class="column is-flex-touch is-justify-content-center" style="position:sticky;right: 2rem;bottom: 0;">
{#            <div class="column">#}
                <a href="{{ path('avis_add') }}" class="button is-green-custom has-text-weight-bold is-fullwidth-touch is-large">
                    Noter chrisBdev
                </a>
{#            </div>#}
        </div>
        
    </section>

{% endblock %}